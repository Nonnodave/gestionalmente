{% extends 'base.html' %}
{% load static %}

<!-- Head content -->
{% block head %}
<link rel="stylesheet" href="{% static 'css/visualize.css' %}">
{% endblock %}

<!-- Title -->
{% block titolo %}Gestionale{% endblock %}

<!-- Body content -->
{% block body%}
<nav class="flex">
    <h1>{{ Prodotto.nome }}</h1>
    <div>
        
    </div>
    <a href="{% url 'prodotti' %}">Prodotti</a>
</nav>

<div id="container" class="flex">
    <!-- Sottocampi -->
    <div id="sottocampi">
        <h2>Sottocampi</h2>

        <button id="btn-crea-sottocampo" class="btn btn-primary">Crea Nuovo Sottocampo</button>
        <div class="sottocampi-list">

            <div class="sottocampi-societa">
                <h3>Sottocampi società</h3>
            
                {% for sottocampo in Sottocampi.societa %}
                    <div draggable="true" class="sottocampi-modello sottocampi-item flex" codice="{{ sottocampo.codice }}">
                        <p>{{ sottocampo.obj.nome }} | <span class="importo">{{ sottocampo.obj.totale }}</span>€/{{ sottocampo.obj.tipo }}</p>
                        <svg style="display: none;" class="pattume-sottocampi" version="1.0" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 150 150"><path d="M60.791.41c-1.963.615-2.93 1.26-4.336 2.812-1.963 2.168-2.256 3.34-2.256 8.965v4.775l-18.662.088-18.691.088-1.611.82c-4.454 2.286-6.739 7.237-5.45 11.749.615 2.139 1.494 3.516 3.105 4.98 1.875 1.67 3.516 2.314 6.504 2.461 2.197.117 2.578.205 2.578.645 0 2.461 8.32 98.408 8.643 99.668 1.084 4.307 4.746 8.818 8.701 10.723C43.095 150.03 42.304 150 75 150c32.725 0 31.992.029 35.742-1.816 3.838-1.875 7.529-6.416 8.643-10.635.645-2.461 1.758-16.729 1.377-17.549s-1.729-1.348-2.607-1.025c-1.289.469-1.465 1.289-2.109 8.906-.352 4.014-.762 7.852-.937 8.496-1.23 4.395-4.512 7.646-8.906 8.789-2.578.645-59.795.674-62.344 0-4.277-1.113-7.5-4.102-8.818-8.203-.322-1.025-1.699-16.26-4.57-50.156-2.256-26.748-4.102-48.867-4.102-49.131 0-.41.498-.469 3.662-.469 3.281 0 3.721-.059 4.248-.586.879-.879.791-2.432-.176-3.193-.732-.586-1.143-.615-8.291-.615-8.145 0-8.994-.146-10.488-1.787a5.718 5.718 0 0 1 1.816-9.082c1.112-.528 3.368-.557 57.86-.557s56.748.029 57.861.557c4.453 2.051 4.453 8.262 0 10.312-1.113.527-3.047.557-45.732.557H42.568l-.791.615c-.967.762-1.055 2.314-.176 3.193.586.586.967.586 41.309.586 36.797 0 40.723.059 40.723.469 0 .234-1.377 16.875-3.076 36.973-3.047 36.035-3.076 36.533-2.549 37.266.85 1.143 2.959 1.172 3.545.029.234-.41 6.475-71.982 6.475-74.15 0-.439.381-.527 2.578-.645 3.076-.146 4.717-.82 6.738-2.695 2.139-1.992 3.135-4.336 3.135-7.354 0-1.963-.146-2.637-.82-4.131-.996-2.139-2.695-3.867-4.893-5.01l-1.611-.82-18.662-.088-18.691-.088v-4.776c0-3.604-.117-5.098-.469-6.152-.645-1.875-2.93-4.307-4.863-5.186L88.916.146 75.439.087C65.127.028 61.699.116 60.791.409zm28.477 4.746c.439.322 1.113 1.055 1.494 1.582.586.908.645 1.289.645 5.596v4.658H58.594v-4.541c0-4.863.146-5.537 1.523-6.797.352-.352.996-.762 1.406-.937.469-.176 5.537-.264 13.828-.234 12.773.059 13.096.088 13.916.674z"/><path d="M47.812 55.869c-.205.088-.557.498-.762.908-.352.703-.029 5.039 2.373 33.603 3.018 35.889 2.783 34.16 4.687 34.365.615.059 1.143-.117 1.699-.615l.82-.703-2.783-33.164c-2.725-32.227-2.842-33.193-3.486-33.896-.615-.674-1.641-.879-2.549-.498zm25.957.117c-.293.146-.645.762-.82 1.377-.439 1.641-.381 64.629.088 65.977.674 1.963 3.252 1.963 3.926 0 .439-1.289.527-64.336.088-65.889-.439-1.582-1.934-2.256-3.281-1.465zm25.869.381c-.645.703-.762 1.67-3.486 33.896l-2.783 33.164.82.703c.557.498 1.084.674 1.699.615 1.904-.205 1.67 1.523 4.687-34.365 2.402-28.418 2.725-32.93 2.373-33.574-.674-1.348-2.256-1.553-3.311-.439z"/></svg>
                    </div>
                {% endfor %}
            </div>

            <div id="divisore-sottocampi"></div>
            
            <div class="sottocampi-prodotto">
                <h3>Sottocampi prodotto</h3>
            
                {% for sottocampo in Sottocampi.prodotto %}
                    <div draggable="true" class="sottocampi-modello sottocampi-item flex" codice="{{ sottocampo.codice }}">
                        <p>{{ sottocampo.obj.nome }} | <span class="importo">{{ sottocampo.obj.totale }}</span>€/{{ sottocampo.obj.tipo }}</p>
                        <svg style="display: none;" class="pattume-sottocampi" version="1.0" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 150 150"><path d="M60.791.41c-1.963.615-2.93 1.26-4.336 2.812-1.963 2.168-2.256 3.34-2.256 8.965v4.775l-18.662.088-18.691.088-1.611.82c-4.454 2.286-6.739 7.237-5.45 11.749.615 2.139 1.494 3.516 3.105 4.98 1.875 1.67 3.516 2.314 6.504 2.461 2.197.117 2.578.205 2.578.645 0 2.461 8.32 98.408 8.643 99.668 1.084 4.307 4.746 8.818 8.701 10.723C43.095 150.03 42.304 150 75 150c32.725 0 31.992.029 35.742-1.816 3.838-1.875 7.529-6.416 8.643-10.635.645-2.461 1.758-16.729 1.377-17.549s-1.729-1.348-2.607-1.025c-1.289.469-1.465 1.289-2.109 8.906-.352 4.014-.762 7.852-.937 8.496-1.23 4.395-4.512 7.646-8.906 8.789-2.578.645-59.795.674-62.344 0-4.277-1.113-7.5-4.102-8.818-8.203-.322-1.025-1.699-16.26-4.57-50.156-2.256-26.748-4.102-48.867-4.102-49.131 0-.41.498-.469 3.662-.469 3.281 0 3.721-.059 4.248-.586.879-.879.791-2.432-.176-3.193-.732-.586-1.143-.615-8.291-.615-8.145 0-8.994-.146-10.488-1.787a5.718 5.718 0 0 1 1.816-9.082c1.112-.528 3.368-.557 57.86-.557s56.748.029 57.861.557c4.453 2.051 4.453 8.262 0 10.312-1.113.527-3.047.557-45.732.557H42.568l-.791.615c-.967.762-1.055 2.314-.176 3.193.586.586.967.586 41.309.586 36.797 0 40.723.059 40.723.469 0 .234-1.377 16.875-3.076 36.973-3.047 36.035-3.076 36.533-2.549 37.266.85 1.143 2.959 1.172 3.545.029.234-.41 6.475-71.982 6.475-74.15 0-.439.381-.527 2.578-.645 3.076-.146 4.717-.82 6.738-2.695 2.139-1.992 3.135-4.336 3.135-7.354 0-1.963-.146-2.637-.82-4.131-.996-2.139-2.695-3.867-4.893-5.01l-1.611-.82-18.662-.088-18.691-.088v-4.776c0-3.604-.117-5.098-.469-6.152-.645-1.875-2.93-4.307-4.863-5.186L88.916.146 75.439.087C65.127.028 61.699.116 60.791.409zm28.477 4.746c.439.322 1.113 1.055 1.494 1.582.586.908.645 1.289.645 5.596v4.658H58.594v-4.541c0-4.863.146-5.537 1.523-6.797.352-.352.996-.762 1.406-.937.469-.176 5.537-.264 13.828-.234 12.773.059 13.096.088 13.916.674z"/><path d="M47.812 55.869c-.205.088-.557.498-.762.908-.352.703-.029 5.039 2.373 33.603 3.018 35.889 2.783 34.16 4.687 34.365.615.059 1.143-.117 1.699-.615l.82-.703-2.783-33.164c-2.725-32.227-2.842-33.193-3.486-33.896-.615-.674-1.641-.879-2.549-.498zm25.957.117c-.293.146-.645.762-.82 1.377-.439 1.641-.381 64.629.088 65.977.674 1.963 3.252 1.963 3.926 0 .439-1.289.527-64.336.088-65.889-.439-1.582-1.934-2.256-3.281-1.465zm25.869.381c-.645.703-.762 1.67-3.486 33.896l-2.783 33.164.82.703c.557.498 1.084.674 1.699.615 1.904-.205 1.67 1.523 4.687-34.365 2.402-28.418 2.725-32.93 2.373-33.574-.674-1.348-2.256-1.553-3.311-.439z"/></svg>
                    </div>
                {% endfor %}
            </div>

        </div>
    </div>
    
    <!-- Divisore -->
    <div id="divisore"></div>

    <!-- Campi -->
    <div id="campi">
        <h2>Campi</h2>
        
        <div id="azioni-campi" class="flex">
            <button id="btn-campi-annulla" class="btn btn-info" disabled>Annulla</button>
            <button id="btn-campi-seleziona" class="btn btn-outline-primary">Seleziona</button>
            <button id="btn-campi-elimina" class="btn btn-danger" disabled>DELETE</button>
        </div>

        <div id="box-campi" class="flex">
            {% for campo in Campi %}
            <div class="campi-list" codice="{{ campo.codice }}">
                <div class="flex campo-header">
                    <svg class="penna-rinomina" xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 1024 1024" transform="scale(-1 1)">
                        <path transform="translate(200,200)" d="m410.3 231 11.3-11.3-33.9-33.9-62.1-62.1-33.9-33.9-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2l199.2-199.2 22.6-22.7zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9l-78.2 23 23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7l-14.4 14.5-22.6 22.6-11.4 11.3 33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5l-39.3-39.4c-25-25-65.5-25-90.5 0zm-47.4 168-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"/>
                    </svg>
                    
                    <h3>{{ campo.obj.nome }}</h3>

                     <!-- Freccia per aprire il menu -->
                     <svg class="freccia-aprire" xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z"/>
                      </svg>
                    
                      <!-- Freccia per chiudere il menu -->
                      <svg class="freccia-chiudere" xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
                      </svg>
                </div>

                <div class="sottocampi-list">
                    {% for sottocampo in campo.sottocampi %}
                    <p class="sottocampi-item" codice="{{ sottocampo.codice }}"><span class="quantita">{{ sottocampo.quantita }}</span> x {{ sottocampo.obj.nome }} | <span class="importo">{{ sottocampo.obj.totale }}</span>€/{{ sottocampo.obj.tipo }}</p>
                    {% endfor %}
                </div>

            </div>
        {% endfor %}

        <button id="btn-crea-campo" class="btn btn-primary">Crea nuovo Campo</button>
        <!-- <a href="{% url 'nuovo-campo' slug=slug %}">Crea Nuovo Campo</a> -->
        </div>
        
    </div>
    
</div>

<div id="popUp-element" class="display-none">
    <div class="popUp-nuovo-campo">
        <h2>Inserisci i dati per creare il nuovo campo</h2>

        <form method="post">
            {{ form_crea_campo.as_p }}
            <input type="submit" value="Crea Campo">
        </form>
    </div>

    <div class="popUp-nuovo-sottocampo">
        <h2>Inserisci i dati per creare il nuovo sottocampo</h2>
        
        <h3>Seleziona dove vuoi salvare il sottocampo</h3>
        <div class="selezione-visione flex">
            <button class="btn btn-success" testo="Il sottocampo sarà visibile in ogni prodotto della tua socità" value="societa" onclick="getInputChange(this, 'target-hidden', false)">Società</button>
            <button class="btn btn-outline-danger" testo="Il sottocampo sarà visibile solo in questo prodotto" value="prodotto" onclick="getInputChange(this, 'target-hidden', false)">Prodotto</button>
        </div>
        <p class="p-seleziona-visione text-warning">Il sottocampo sarà visibile in ogni prodotto della tua socità</p>

        <h3>Seleziona il tipo di sottocampo</h3>
        <div class="selezione-tipo flex">
            <button class="btn btn-success" onclick="getInputChange(this, 'tipologia-hidden')" value="pezzo">Pezzo</button>
            <button class="btn btn-outline-danger" onclick="getInputChange(this, 'tipologia-hidden')" value="orario">Orario</button>
        </div>

        <form method="post" id="form-dati">
            <input type="hidden" value="societa" name="target" class="target-hidden">
            <input type="hidden" value="pezzo" name="tipologia" class="tipologia-hidden">

            <div id="form-pezzo" style="display: block;">
                {{ form_crea_sottocampo_pezzo.as_p }}
            </div>
            <div id="form-orario" style="display: none;">
                {{ form_crea_sottocampo_orario.as_p }}
            </div>
            
            <input type="submit" value="Crea Sottocampo">
        </form>
    </div>

    <div class="nuovo-sottocampo">
        <div draggable="true" class="sottocampi-item flex" codice="{{ sottocampo.codice }}">
            <svg style="display: none;" class="pattume-sottocampi" version="1.0" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 150 150"><path d="M60.791.41c-1.963.615-2.93 1.26-4.336 2.812-1.963 2.168-2.256 3.34-2.256 8.965v4.775l-18.662.088-18.691.088-1.611.82c-4.454 2.286-6.739 7.237-5.45 11.749.615 2.139 1.494 3.516 3.105 4.98 1.875 1.67 3.516 2.314 6.504 2.461 2.197.117 2.578.205 2.578.645 0 2.461 8.32 98.408 8.643 99.668 1.084 4.307 4.746 8.818 8.701 10.723C43.095 150.03 42.304 150 75 150c32.725 0 31.992.029 35.742-1.816 3.838-1.875 7.529-6.416 8.643-10.635.645-2.461 1.758-16.729 1.377-17.549s-1.729-1.348-2.607-1.025c-1.289.469-1.465 1.289-2.109 8.906-.352 4.014-.762 7.852-.937 8.496-1.23 4.395-4.512 7.646-8.906 8.789-2.578.645-59.795.674-62.344 0-4.277-1.113-7.5-4.102-8.818-8.203-.322-1.025-1.699-16.26-4.57-50.156-2.256-26.748-4.102-48.867-4.102-49.131 0-.41.498-.469 3.662-.469 3.281 0 3.721-.059 4.248-.586.879-.879.791-2.432-.176-3.193-.732-.586-1.143-.615-8.291-.615-8.145 0-8.994-.146-10.488-1.787a5.718 5.718 0 0 1 1.816-9.082c1.112-.528 3.368-.557 57.86-.557s56.748.029 57.861.557c4.453 2.051 4.453 8.262 0 10.312-1.113.527-3.047.557-45.732.557H42.568l-.791.615c-.967.762-1.055 2.314-.176 3.193.586.586.967.586 41.309.586 36.797 0 40.723.059 40.723.469 0 .234-1.377 16.875-3.076 36.973-3.047 36.035-3.076 36.533-2.549 37.266.85 1.143 2.959 1.172 3.545.029.234-.41 6.475-71.982 6.475-74.15 0-.439.381-.527 2.578-.645 3.076-.146 4.717-.82 6.738-2.695 2.139-1.992 3.135-4.336 3.135-7.354 0-1.963-.146-2.637-.82-4.131-.996-2.139-2.695-3.867-4.893-5.01l-1.611-.82-18.662-.088-18.691-.088v-4.776c0-3.604-.117-5.098-.469-6.152-.645-1.875-2.93-4.307-4.863-5.186L88.916.146 75.439.087C65.127.028 61.699.116 60.791.409zm28.477 4.746c.439.322 1.113 1.055 1.494 1.582.586.908.645 1.289.645 5.596v4.658H58.594v-4.541c0-4.863.146-5.537 1.523-6.797.352-.352.996-.762 1.406-.937.469-.176 5.537-.264 13.828-.234 12.773.059 13.096.088 13.916.674z"/><path d="M47.812 55.869c-.205.088-.557.498-.762.908-.352.703-.029 5.039 2.373 33.603 3.018 35.889 2.783 34.16 4.687 34.365.615.059 1.143-.117 1.699-.615l.82-.703-2.783-33.164c-2.725-32.227-2.842-33.193-3.486-33.896-.615-.674-1.641-.879-2.549-.498zm25.957.117c-.293.146-.645.762-.82 1.377-.439 1.641-.381 64.629.088 65.977.674 1.963 3.252 1.963 3.926 0 .439-1.289.527-64.336.088-65.889-.439-1.582-1.934-2.256-3.281-1.465zm25.869.381c-.645.703-.762 1.67-3.486 33.896l-2.783 33.164.82.703c.557.498 1.084.674 1.699.615 1.904-.205 1.67 1.523 4.687-34.365 2.402-28.418 2.725-32.93 2.373-33.574-.674-1.348-2.256-1.553-3.311-.439z"/></svg>
        </div>
    </div>

    <div class="nuovo-campo">
        <div class="campi-list">
            <div class="flex campo-header">
                <svg class="penna-rinomina" xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 1024 1024" transform="scale(-1 1)">
                    <path transform="translate(200,200)" d="m410.3 231 11.3-11.3-33.9-33.9-62.1-62.1-33.9-33.9-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2l199.2-199.2 22.6-22.7zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9l-78.2 23 23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7l-14.4 14.5-22.6 22.6-11.4 11.3 33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5l-39.3-39.4c-25-25-65.5-25-90.5 0zm-47.4 168-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"/>
                </svg>
                
                <h3>{{ campo.obj.nome }}</h3>

                <!-- Freccia per aprire il menu -->
                <svg class="freccia-aprire" xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z"/>
                </svg>
                
                <!-- Freccia per chiudere il menu -->
                <svg class="freccia-chiudere" xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
                </svg>
            </div>
        </div>
    </div>
    
</div>

<script src="{% static 'js/visualize.js' %}"></script>
{% endblock %}
